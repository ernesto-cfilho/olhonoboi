{% extends 'base.html' %}
{% load static %}

{% block title %}Relatório Anual{% endblock %}

{% block content %}
<!-- Header with Year Selector -->
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h1 class="text-primary">
                    <i class="fas fa-chart-area me-3"></i>
                    Relatório Anual
                </h1>
                <p class="text-muted mb-0">Ano: {% now "Y" %}</p>
            </div>
            <div class="btn-group" role="group">
                <a href="{% url 'exportar_pdf_anual' %}" class="btn btn-outline-danger">
                    <i class="fas fa-file-pdf me-2"></i>Exportar PDF
                </a>
                <a href="{% url 'exportar_excel_anual' %}" class="btn btn-outline-success">
                    <i class="fas fa-file-excel me-2"></i>Exportar Excel
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Annual Summary Cards -->
<div class="row g-4 mb-5">
    <div class="col-lg-2 col-md-4 col-sm-6">
        <div class="card bg-gradient-primary text-white h-100">
            <div class="card-body text-center">
                <i class="fas fa-cow fa-2x mb-3"></i>
                <h3 class="mb-1">0</h3>
                <p class="mb-0 small">Total de Animais</p>
            </div>
        </div>
    </div>
    
    <div class="col-lg-2 col-md-4 col-sm-6">
        <div class="card bg-gradient-success text-white h-100">
            <div class="card-body text-center">
                <i class="fas fa-syringe fa-2x mb-3"></i>
                <h3 class="mb-1">0</h3>
                <p class="mb-0 small">Vacinações</p>
            </div>
        </div>
    </div>
    
    <div class="col-lg-2 col-md-4 col-sm-6">
        <div class="card bg-gradient-warning text-white h-100">
            <div class="card-body text-center">
                <i class="fas fa-dollar-sign fa-2x mb-3"></i>
                <h3 class="mb-1">R$ 0</h3>
                <p class="mb-0 small">Investimento Total</p>
            </div>
        </div>
    </div>
    
    <div class="col-lg-2 col-md-4 col-sm-6">
        <div class="card bg-gradient-info text-white h-100">
            <div class="card-body text-center">
                <i class="fas fa-chart-line fa-2x mb-3"></i>
                <h3 class="mb-1">0%</h3>
                <p class="mb-0 small">Crescimento</p>
            </div>
        </div>
    </div>
    
    <div class="col-lg-2 col-md-4 col-sm-6">
        <div class="card bg-gradient-danger text-white h-100">
            <div class="card-body text-center">
                <i class="fas fa-boxes fa-2x mb-3"></i>
                <h3 class="mb-1">0</h3>
                <p class="mb-0 small">Produtos Estoque</p>
            </div>
        </div>
    </div>
    
    <div class="col-lg-2 col-md-4 col-sm-6">
        <div class="card bg-gradient-dark text-white h-100">
            <div class="card-body text-center">
                <i class="fas fa-map-marker-alt fa-2x mb-3"></i>
                <h3 class="mb-1">0</h3>
                <p class="mb-0 small">Fazendas Ativas</p>
            </div>
        </div>
    </div>
</div>

<!-- Annual Performance Chart -->
<div class="row mb-5">
    <div class="col-12">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-chart-area me-2"></i>
                    Performance Anual - Evolução Mensal
                </h5>
            </div>
            <div class="card-body">
                <div class="chart-container" style="height: 400px;">
                    <div class="d-flex align-items-center justify-content-center h-100">
                        <div class="text-center">
                            <i class="fas fa-chart-area fa-4x text-muted mb-3"></i>
                            <h5 class="text-muted">Gráfico de Performance Anual</h5>
                            <p class="text-muted">Visualização da evolução mensal do rebanho, vacinações e investimentos.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Quarterly Analysis -->
<div class="row g-4 mb-5">
    <div class="col-lg-6">
        <div class="card shadow h-100">
            <div class="card-header bg-success text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-chart-bar me-2"></i>
                    Análise Trimestral
                </h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead class="table-light">
                            <tr>
                                <th>Trimestre</th>
                                <th>Animais</th>
                                <th>Vacinações</th>
                                <th>Investimento</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Q1</strong> <small class="text-muted">(Jan-Mar)</small></td>
                                <td><span class="badge bg-primary">0</span></td>
                                <td><span class="badge bg-success">0</span></td>
                                <td><span class="text-success fw-bold">R$ 0</span></td>
                            </tr>
                            <tr>
                                <td><strong>Q2</strong> <small class="text-muted">(Abr-Jun)</small></td>
                                <td><span class="badge bg-primary">0</span></td>
                                <td><span class="badge bg-success">0</span></td>
                                <td><span class="text-success fw-bold">R$ 0</span></td>
                            </tr>
                            <tr>
                                <td><strong>Q3</strong> <small class="text-muted">(Jul-Set)</small></td>
                                <td><span class="badge bg-primary">0</span></td>
                                <td><span class="badge bg-success">0</span></td>
                                <td><span class="text-success fw-bold">R$ 0</span></td>
                            </tr>
                            <tr>
                                <td><strong>Q4</strong> <small class="text-muted">(Out-Dez)</small></td>
                                <td><span class="badge bg-primary">0</span></td>
                                <td><span class="badge bg-success">0</span></td>
                                <td><span class="text-success fw-bold">R$ 0</span></td>
                            </tr>
                        </tbody>
                        <tfoot class="table-dark">
                            <tr>
                                <th>Total Anual</th>
                                <th><span class="badge bg-light text-dark">0</span></th>
                                <th><span class="badge bg-light text-dark">0</span></th>
                                <th><span class="text-light fw-bold">R$ 0</span></th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-lg-6">
        <div class="card shadow h-100">
            <div class="card-header bg-warning text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-chart-pie me-2"></i>
                    Distribuição de Investimentos
                </h5>
            </div>
            <div class="card-body">
                <div class="chart-container" style="height: 300px;">
                    <div class="d-flex align-items-center justify-content-center h-100">
                        <div class="text-center">
                            <i class="fas fa-chart-pie fa-3x text-muted mb-3"></i>
                            <h6 class="text-muted">Gráfico de Investimentos</h6>
                            <p class="text-muted">Distribuição por categoria:<br>
                            Ração, Medicamentos, Equipamentos</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Annual Goals and Targets -->
<div class="row g-4 mb-5">
    <div class="col-lg-4">
        <div class="card shadow h-100">
            <div class="card-header bg-info text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-bullseye me-2"></i>
                    Metas Atingidas
                </h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <div class="d-flex justify-content-between mb-1">
                        <span class="small">Crescimento do Rebanho</span>
                        <span class="small fw-bold">0%</span>
                    </div>
                    <div class="progress">
                        <div class="progress-bar bg-success" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="mb-3">
                    <div class="d-flex justify-content-between mb-1">
                        <span class="small">Programa de Vacinação</span>
                        <span class="small fw-bold">0%</span>
                    </div>
                    <div class="progress">
                        <div class="progress-bar bg-warning" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="mb-3">
                    <div class="d-flex justify-content-between mb-1">
                        <span class="small">Controle de Estoque</span>
                        <span class="small fw-bold">0%</span>
                    </div>
                    <div class="progress">
                        <div class="progress-bar bg-info" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="mb-0">
                    <div class="d-flex justify-content-between mb-1">
                        <span class="small">ROI (Retorno de Investimento)</span>
                        <span class="small fw-bold">0%</span>
                    </div>
                    <div class="progress">
                        <div class="progress-bar bg-danger" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-lg-8">
        <div class="card shadow h-100">
            <div class="card-header bg-dark text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-trophy me-2"></i>
                    Principais Conquistas do Ano
                </h5>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-6 mb-4">
                        <div class="achievement-item">
                            <i class="fas fa-award fa-3x text-warning mb-2"></i>
                            <h6>Rebanho Saudável</h6>
                            <p class="text-muted small">100% dos animais vacinados no prazo</p>
                        </div>
                    </div>
                    <div class="col-md-6 mb-4">
                        <div class="achievement-item">
                            <i class="fas fa-chart-line fa-3x text-success mb-2"></i>
                            <h6>Crescimento Consistente</h6>
                            <p class="text-muted small">Meta de crescimento anual atingida</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="achievement-item">
                            <i class="fas fa-shield-alt fa-3x text-primary mb-2"></i>
                            <h6>Zero Mortalidade</h6>
                            <p class="text-muted small">Nenhuma perda no rebanho este ano</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="achievement-item">
                            <i class="fas fa-leaf fa-3x text-info mb-2"></i>
                            <h6>Sustentabilidade</h6>
                            <p class="text-muted small">Práticas sustentáveis implementadas</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Annual Data Tables -->
<div class="row mb-5">
    <div class="col-12">
        <div class="card shadow">
            <div class="card-header bg-secondary text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-table me-2"></i>
                    Resumo Detalhado por Mês
                </h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-dark">
                            <tr>
                                <th>Mês</th>
                                <th>Animais Adicionados</th>
                                <th>Vacinações</th>
                                <th>Gastos com Ração</th>
                                <th>Gastos com Medicamentos</th>
                                <th>Total Investido</th>
                                <th>Observações</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for month in "123456789012"|make_list %}
                            <tr>
                                <td><strong>{% cycle "Janeiro" "Fevereiro" "Março" "Abril" "Maio" "Junho" "Julho" "Agosto" "Setembro" "Outubro" "Novembro" "Dezembro" %}</strong></td>
                                <td><span class="badge bg-primary">0</span></td>
                                <td><span class="badge bg-success">0</span></td>
                                <td><span class="text-success">R$ 0</span></td>
                                <td><span class="text-warning">R$ 0</span></td>
                                <td><span class="fw-bold">R$ 0</span></td>
                                <td><small class="text-muted">-</small></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                        <tfoot class="table-dark">
                            <tr>
                                <th>TOTAL ANUAL</th>
                                <th><span class="badge bg-light text-dark">0</span></th>
                                <th><span class="badge bg-light text-dark">0</span></th>
                                <th><span class="text-light">R$ 0</span></th>
                                <th><span class="text-light">R$ 0</span></th>
                                <th><span class="text-light fw-bold">R$ 0</span></th>
                                <th><span class="text-light">-</span></th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Export Section -->
<div class="row">
    <div class="col-12">
        <div class="card shadow">
            <div class="card-body text-center">
                <h5 class="mb-3">Exportar Relatório Anual</h5>
                <p class="text-muted mb-4">Baixe o relatório completo em diferentes formatos</p>
                <div class="btn-group btn-group-lg" role="group">
                    <button type="button" class="btn btn-success">
                        <i class="fas fa-file-excel me-2"></i>Excel Completo
                    </button>
                    <button type="button" class="btn btn-danger">
                        <i class="fas fa-file-pdf me-2"></i>PDF Executivo
                    </button>
                    <button type="button" class="btn btn-primary">
                        <i class="fas fa-print me-2"></i>Imprimir
                    </button>
                    <button type="button" class="btn btn-info">
                        <i class="fas fa-envelope me-2"></i>Enviar por Email
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Back Navigation -->
<div class="row mt-4">
    <div class="col-12">
        <a href="{% url 'relatorios_index' %}" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left me-2"></i>Voltar aos Relatórios
        </a>
    </div>
</div>

<!-- Custom Styles -->
<style>
.bg-gradient-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.bg-gradient-success {
    background: linear-gradient(135deg, #2af598 0%, #009efd 100%);
}

.bg-gradient-warning {
    background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);
}

.bg-gradient-info {
    background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
}

.bg-gradient-danger {
    background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
}

.bg-gradient-dark {
    background: linear-gradient(135deg, #636e72 0%, #2d3436 100%);
}

.achievement-item {
    padding: 1rem;
    border-radius: 10px;
    background: rgba(0,0,0,0.02);
    transition: transform 0.3s ease;
}

.achievement-item:hover {
    transform: translateY(-2px);
    background: rgba(0,0,0,0.05);
}
</style>

{% endblock %}
